apiVersion: v1
kind: Service
metadata:
  name: gotty-backend-service
  namespace: v3
spec:
  selector:
    app: gotty-backend
  ports:
    - protocol: TCP
      name: http
      port: 5000 # Backend API port
      targetPort: 5000
      nodePort: 32000 # Fixed NodePort for the backend API
    - protocol: TCP
      name: grpc
      port: 41000 # Dynamic port example
      targetPort: 41000
      nodePort: 32100 # Exposed NodePort for this dynamic port
    - protocol: TCP
      name: grpc2
      port: 41001 # Additional dynamic port
      targetPort: 41001
      nodePort: 32101 # Exposed NodePort for this additional port
  type: NodePort

---
apiVersion: v1
kind: Service
metadata:
  name: gotty-frontend-service
  namespace: v3
spec:
  selector:
    app: gotty-frontend
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: ClusterIP
